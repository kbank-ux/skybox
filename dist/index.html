<!DOCTYPE html><html lang=ko><script type=importmap>{"imports":{"2rDQN":"/skybox/Box2D.simd.dd31b167.wasm","8BShk":"/skybox/Box2D.simd.029569fa.js","h7cmx":"/skybox/Box2D.b9b16b27.wasm","ilUZb":"/skybox/Box2D.62358123.js"}}</script><meta name=viewport content="width=device-width, initial-scale=1.0"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=apple-touch-icon sizes=57x57 href=/skybox/apple-icon-57x57.5ecd1650.png><link rel=apple-touch-icon sizes=60x60 href=/skybox/apple-icon-60x60.b46a75af.png><link rel=apple-touch-icon sizes=72x72 href=/skybox/apple-icon-72x72.4726ed35.png><link rel=apple-touch-icon sizes=76x76 href=/skybox/apple-icon-76x76.72dbc1e1.png><link rel=apple-touch-icon sizes=114x114 href=/skybox/apple-icon-114x114.6cefcd75.png><link rel=apple-touch-icon sizes=120x120 href=/skybox/apple-icon-120x120.462d8e84.png><link rel=apple-touch-icon sizes=144x144 href=/skybox/apple-icon-144x144.36ef70f8.png><link rel=apple-touch-icon sizes=152x152 href=/skybox/apple-icon-152x152.1f1d2b56.png><link rel=apple-touch-icon sizes=180x180 href=/skybox/apple-icon-180x180.33666671.png><link rel=icon type=image/png sizes=192x192 href=/skybox/android-icon-192x192.6c0734fc.png><link rel=icon type=image/png sizes=32x32 href=/skybox/favicon-32x32.b3414860.png><link rel=icon type=image/png sizes=96x96 href=/skybox/favicon-96x96.b086bd80.png><link rel=icon type=image/png sizes=16x16 href=/skybox/favicon-16x16.b88a3ef4.png><link rel=manifest href=/skybox/assets/manifest.webmanifest><meta name=msapplication-TileColor content=#ffffff><meta name=msapplication-TileImage content=/skybox/ms-icon-144x144.e402ee4a.png><meta name=theme-color content=#ffffff><title>KT 수원야구장 스카이박스 추첨</title><link rel=preconnect href=http://fonts.googleapis.com><link rel=preconnect href=http://fonts.gstatic.com crossorigin><link href="http://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&amp;display=swap" rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js></script><style lang=scss>*{box-sizing:border-box;font-family:Noto Sans KR,sans-serif}canvas{width:100%;height:100%;position:fixed;inset:0}div.copyright{color:#fff;z-index:999;font-size:12px;position:fixed;bottom:0;left:50%;transform:translate(-50%)}div.copyright a{color:#fff}#pageTitle{color:#fff;z-index:9999;text-align:center;white-space:normal;width:80%;margin:0;padding:0;font-size:clamp(16px,4vw,36px);font-weight:700;line-height:1.2;position:fixed;top:20px;left:50%;transform:translate(-50%)}#playcountdownOverlay{z-index:99999;color:#fff;text-align:center;background:#000000b3;flex-direction:column;justify-content:center;align-items:center;font-size:200px;font-weight:700;display:none;position:fixed;inset:0}#precountdownOverlay{z-index:99999;color:#fff;text-align:center;background:#000c;flex-direction:column;justify-content:flex-start;align-items:center;gap:0;padding-top:60px;font-size:10px;font-weight:700;display:none;position:fixed;inset:0}.message-layer{text-align:center;color:#fff;font-size:clamp(20px,3vw,60px);line-height:1.5}.countdown-layer{color:#fff;z-index:1002;margin-top:0;font-size:clamp(100px,10vw,200px);font-weight:700;line-height:.8}.names-layer{color:#fff;z-index:1003;text-align:center;margin-top:0;font-size:clamp(30px,3vw,60px);font-weight:700}#settings{z-index:999;visibility:visible;opacity:1;background:#666;border-radius:10px;min-width:50%;padding:10px;transition:visibility,opacity 1s linear;display:flex;position:fixed;bottom:1rem;left:50%;transform:translate(-50%);&.hide{opacity:0;visibility:hidden}& h3{color:#fefefe;margin:0;padding:0;font-size:12pt}& textarea{background:#999;border:none;width:100%;min-height:5rem;font-size:14pt}& button{cursor:pointer;color:#fefefe;background:#222;border:none;border-radius:5px;padding:5px 10px;position:relative;overflow:hidden;&:active:after{content:"";background:#00000080;position:absolute;inset:0}}& .icon{vertical-align:middle;background:currentColor;width:25px;height:25px;display:inline-block;mask-position:50%;mask-size:contain;mask-repeat:no-repeat;&.play{mask-image:url(play.d2b98249.svg)}&.shuffle{mask-image:url(shuffle.e9e498cf.svg)}&.record{mask-image:url(record.c71c4728.svg)}&.map{mask-image:url(map.eb357c03.svg)}&.trophy{mask-image:url(trophy.50d1ba0a.svg)}&.bomb{mask-image:url(bomb.455f9b17.svg)}&.preplay{mask-image:url(check.7e390469.svg)}}& div.left{flex-grow:1;flex-shrink:1;order:1;& .actions{text-align:right}}& div.right{flex-grow:0;flex-shrink:0;order:2;& div.row{align-items:center;height:35px;display:flex;& label{color:#fff;flex-grow:0;flex-shrink:0;width:150px;padding-left:1rem}}}& select{background:#999;border-radius:5px;width:100%;height:25px}& input[type=checkbox]{vertical-align:middle;width:0;height:25px;position:relative;&:before{content:"";background:#999;border-radius:25px;width:50px;height:25px;display:inline-block;position:absolute;top:0;left:0}&:after{content:"";background:#ccc;border-radius:25px;width:25px;height:25px;transition:transform .2s;position:absolute;top:0;left:0}&:checked:after{background:#fff;transform:translate(100%)}&:checked:before{content:"";background:#00baff}}& .btn-group{justify-content:stretch;display:flex;&>*{box-sizing:border-box;color:#fefefe;background:#999;border:none;border-radius:0;flex-grow:0;flex-shrink:0;justify-content:center;align-items:center;width:33%;height:25px;padding:0;display:flex;overflow:hidden;&:first-child{border-radius:10px 0 0 10px}&:last-child{border-radius:0 10px 10px 0}&.active:before{content:"";vertical-align:middle;background:#fff;width:15px;height:15px;display:inline-block;mask-image:url(check.7e390469.svg);mask-repeat:no-repeat}&.active{background:#333}}& input[type=number]{box-sizing:border-box;text-align:center}}}#donate{z-index:999;visibility:visible;opacity:1;transition:visibility,opacity 1s linear;position:fixed;bottom:calc(160px + 1.5rem);left:1rem;&.hide{opacity:0;visibility:hidden}}@media screen and (width<=750px){#donate{bottom:1rem}#settings{opacity:1;visibility:visible;width:calc(100% - 2rem);min-width:0;max-width:100%;transition:visibility,opacity 1s linear;display:block;bottom:calc(1.5rem + 60px);overflow:hidden;&.hide{opacity:0;visibility:hidden}& div.right div.row{border-bottom:1px solid #555;height:auto;padding:.5rem 0;display:block;& label{width:100%;margin-bottom:.5rem;padding-left:0;display:block}& .icon{width:15px;height:15px}}}}#in_gameInfo{color:#fff;background:#999;border:none;border-radius:5px;width:100%;height:25px;padding:0 10px}#in_gameInfo::placeholder{color:#ddd}</style><body>
<audio id=backgroundMusic src=/skybox/conan.8c5af8ba.mp3 loop></audio>
<audio id=stage1Music src=/skybox/stage1.10d34122.mp3></audio>
<script type=module src=/skybox/skybox.52e9bf76.js></script>
<script>let MAX_SAMPLES=333,expandedNames=[],preSelectedNames=[],ready=!1,winnerType="first";function preStartShuffle(){preSelectedNames=(expandedNames=getNames().flatMap(e=>{let t=e.match(/^(.*)\*(\d+)$/);if(t){let e=t[1].trim();return Array(parseInt(t[2],10)).fill(e)}return[e.trim()]})).length>MAX_SAMPLES?expandedNames.sort(()=>Math.random()-.5).slice(0,MAX_SAMPLES):expandedNames,getReady(),console.log("사전 셔플 완료:",preSelectedNames)}function run1stStage(){let e=document.getElementById("precountdownOverlay");e.style.display="flex",e.innerHTML="";let t=document.createElement("div");t.classList.add("message-layer");let n=getNames(),o=n.length,r=n.reduce((e,t)=>{let n=t.match(/^(.*)\*(\d+)$/);return n?e+parseInt(n[2],10):e+1},0),a=MAX_SAMPLES;t.innerHTML=`
			<p>${o}\u{BA85}\u{C758} \u{C751}\u{BAA8}\u{AD8C} \u{CD1D} ${r}\u{AC1C} \u{C911}\u{C5D0}\u{C11C}<br>\u{C6B4}\u{BA85}\u{C758} \u{C218}\u{B808}\u{BC14}\u{D034}\u{C5D0} \u{C62C}\u{B77C}\u{D0C8} ${a}\u{AC1C}\u{B97C} \u{BA3C}\u{C800} \u{BF51}\u{C2B5}\u{B2C8}\u{B2E4}</p>
		`,e.appendChild(t);let i=document.createElement("div");i.classList.add("countdown-layer"),e.appendChild(i);let l=document.createElement("div");l.classList.add("names-layer"),e.appendChild(l),setTimeout(()=>{start1stStageCountdown(i,l)},1e3)}function start1stStageCountdown(e,t){let n=5;e.textContent=5,window.startstage1Music();let o=setInterval(()=>{let a=MAX_SAMPLES;--n>0?e.textContent=n:(e.innerHTML=`<p style='font-size: clamp(30px, 4vw, 100px)'>${a}\u{BA85} \u{CD94}\u{CCA8} \u{C644}\u{B8CC}!</p>`,clearInterval(o),clearInterval(i),clearInterval(r),t.innerHTML="",fadeOutOverlay(document.getElementById("precountdownOverlay")))},1e3),r=setInterval(()=>{preStartShuffle()},100),a=0,i=setInterval(()=>{if(0===preSelectedNames.length)return;let e=preSelectedNames[a%preSelectedNames.length];t.innerHTML=`<p>${e}</p>`,a++},50)}function fadeOutOverlay(e){setTimeout(()=>{e.style.transition="opacity 1s",e.style.opacity="0",setTimeout(()=>{e.style.display="none",e.style.opacity="1",e.innerHTML=""},1e3)},1e3)}function getNames(){return document.querySelector("#in_names").value.trim().split(/[,\r\n]/g).map(e=>e.trim()).filter(e=>!!e)}function parseName(e){let t=/(\/\d+)/,n=/(\*\d+)/,o=t.test(e),r=n.test(e),a=/^\s*([^\/*]+)?/.exec(e)[1];return{name:a,weight:o?parseInt(t.exec(e)[1].replace("/","")):1,count:r?parseInt(n.exec(e)[1].replace("*","")):1}}function getReady(){let e=preSelectedNames.length>0?preSelectedNames:getNames();switch(window.roullete.setMarbles(e),ready=e.length>0,localStorage.setItem("mbr_names",e.join(",")),winnerType){case"first":setWinnerRank(1);break;case"last":setWinnerRank(window.roullete.getCount())}}function setWinnerRank(e){document.querySelector("#in_winningRank").value=e,window.options.winningRank=e-1,window.roullete.setWinningRank(window.options.winningRank),"first"===winnerType?(document.querySelector(".btn-first-winner").classList.toggle("active",!0),document.querySelector(".btn-last-winner").classList.toggle("active",!1),document.querySelector("#in_winningRank").classList.toggle("active",!1)):"last"===winnerType?(document.querySelector(".btn-first-winner").classList.toggle("active",!1),document.querySelector(".btn-last-winner").classList.toggle("active",!0),document.querySelector("#in_winningRank").classList.toggle("active",!1)):"custom"===winnerType&&(document.querySelector(".btn-first-winner").classList.toggle("active",!1),document.querySelector(".btn-last-winner").classList.toggle("active",!1),document.querySelector("#in_winningRank").classList.toggle("active",!0))}function initializeAll(){let e=document.querySelector("#in_gameInfo"),t=document.querySelector("#gameInfo");e&&t&&e.addEventListener("input",e=>{t.textContent=e.target.value}),restoreFromUrl(),initialize()}function initialize(){if(!window.roullete||!window.roullete.isReady)return void setTimeout(initialize,100);let e=localStorage.getItem("mbr_names");e&&(document.querySelector("#in_names").value=e),document.querySelector("#in_names").addEventListener("input",()=>{getReady()}),document.querySelector("#in_names").addEventListener("blur",()=>{let e=getNames(),t=new Set,n={};e.forEach(e=>{let o=parseName(e),r=o.weight>1?`${o.name}/${o.weight}`:o.name;t.has(r)||(t.add(r),n[r]=0),n[r]+=o.count});let o=[];Object.keys(n).forEach(e=>{n[e]>1?o.push(`${e}*${n[e]}`):o.push(e)});let r=document.querySelector("#in_names").value,a=o.join(",");r!==a&&(document.querySelector("#in_names").value=a,getReady())}),document.querySelector("#in_maxSamples").addEventListener("change",e=>{let t=parseInt(e.target.value,10);MAX_SAMPLES=isNaN(t)||t<1?333:t}),document.querySelector("#btnPreStart").addEventListener("click",()=>{run1stStage()}),document.querySelector("#btnShuffle").addEventListener("click",()=>{getReady()}),document.querySelector("#btnStart").addEventListener("click",()=>{ready&&(window.startBackgroundMusic(),startCountdown(()=>{window.roullete.start(),document.querySelector("#settings").classList.add("hide")}),document.querySelector("#settings").classList.add("hide"))}),window.options.autoRecording=!0,window.roullete.setAutoRecording(window.options.autoRecording),document.querySelector("#chkAutoRecording").addEventListener("change",e=>{window.options.autoRecording=e.target.matches(":checked"),window.roullete.setAutoRecording(window.options.autoRecording)}),window.options.useSkills=!1,window.roullete.setWinningRank(window.options.winningRank),document.querySelector("#in_winningRank").addEventListener("change",e=>{let t=parseInt(e.target.value,10);winnerType="custom",setWinnerRank(isNaN(t)?0:t)}),document.querySelector(".btn-last-winner").addEventListener("click",()=>{let e=window.roullete.getCount();winnerType="last",setWinnerRank(e)}),document.querySelector(".btn-first-winner").addEventListener("click",()=>{winnerType="first",setWinnerRank(1)}),window.roullete.addEventListener("goal",()=>{ready=!1,setTimeout(()=>{document.querySelector("#settings").classList.remove("hide")},3e3)}),window.roullete.addEventListener("shakeAvailableChanged",e=>{document.querySelector("#inGame").classList.toggle("hide",!e.detail)}),document.querySelector("#btnShuffle").click();let t=window.roullete.getMaps(),n=document.querySelector("#sltMap");t.forEach(e=>{let t=document.createElement("option");t.value=e.index,t.innerHTML=e.title,t.setAttribute("data-trans",""),window.translateElement(t),n.append(t)}),n.addEventListener("change",e=>{let t=e.target.value;window.roullete.setMap(t)})}window.startBackgroundMusic=function(){var e=document.getElementById("backgroundMusic");e?(e.muted=!1,e.play().then(()=>{}).catch(e=>{console.log("Error playing audio:",e)})):console.log("Audio element not found.")},window.startstage1Music=function(){var e=document.getElementById("stage1Music");e?(e.muted=!1,e.play().then(()=>{}).catch(e=>{console.log("Error playing audio:",e)})):console.log("Audio element not found.")},window.startCountdown=function(e){let t=document.getElementById("playcountdownOverlay");t.style.display="flex";let n=["3","2","1","GO!"],o=0;!function r(){o<n.length?(t.textContent=n[o],o++,setTimeout(r,1e3)):setTimeout(()=>{t.style.display="none",e()},10)}()},window.dataLayer=window.dataLayer||[],localStorage.removeItem("mbr_names");let SECRET_KEY=0x134d889;function xorEncode(e,t){return btoa(Array.from(e).map((e,n)=>String.fromCharCode(e.charCodeAt(0)^t%256)).join(""))}function xorDecode(e,t){try{return atob(e).split("").map((e,n)=>String.fromCharCode(e.charCodeAt(0)^t%256)).join("")}catch(e){return""}}function makeShareUrl(){let e=xorEncode(JSON.stringify({names:document.querySelector("#in_names").value,gameInfo:document.querySelector("#in_gameInfo").value}),0x134d889);return`${location.origin}${location.pathname}?data=${encodeURIComponent(e)}`}function compressData(e){let t={" ":"_",가:"a",나:"b",다:"c",라:"d",마:"e",바:"f",사:"g",아:"h",자:"i",차:"j",카:"k",타:"l",파:"m",하:"n",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},n=Object.entries(t).reduce((e,[t,n])=>(e[n]=t,e),{});return{encode:function(e){return e.split("").map(e=>t[e]||e).join("")},decode:function(e){return e.split("").map(e=>n[e]||e).join("")}}}function restoreFromUrl(){let e=new URLSearchParams(location.search);if(e.has("data"))try{let t=e.get("data"),n=LZString.decompressFromEncodedURIComponent(t);if(!n)return;let o=JSON.parse(n),r=document.querySelector("#in_names"),a=document.querySelector("#in_gameInfo"),i=document.querySelector("#gameInfo");o.g&&a&&i&&(a.value=o.g,i.textContent=o.g);let l=setInterval(()=>{if(window.roullete&&window.roullete.isReady){clearInterval(l);let e=document.querySelector("#sltMap");e&&(e.value="0",window.roullete.setMap("0"),o.n&&r&&(r.value=o.n,getReady()))}},100)}catch(e){console.error("데이터 복원 실패:",e)}}function copyTest(){let e=document.querySelector("#in_names").value,t=document.querySelector("#in_gameInfo").value,n=LZString.compressToEncodedURIComponent(JSON.stringify({n:e,g:t})),o=window.location.href.split("?")[0],r=`${o}?data=${n}`,a=document.createElement("textarea");a.value=r,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),alert("공유 URL이 클립보드에 복사되었습니다!")}document.addEventListener("DOMContentLoaded",()=>{initializeAll(),restoreFromUrl()});</script>
<h1 id=pageTitle style="text-shadow:2px 2px 4px #000c">KT 수원야구장 스카이박스 추첨</h1>
<div id=settings class=settings>
	<div class=right>
		<div class=row>
			<label>
				<i class="icon map"></i>
				<span data-trans>Map</span>
			</label>
			<select id=sltMap></select>
		</div>
		<div class=row>
			<label>
				<i class="icon record"></i>
				<span data-trans>Recording</span>
			</label>
			<input type=checkbox id=chkAutoRecording checked>
		</div>
		<div class=row style=display:none>
			<label>
				<i class="bomb icon"></i>
				<span data-trans>예선 추첨자 수</span>
			</label>
			<div class=btn-group>
				<input type=number id=in_maxSamples value=333 min=1>
			</div>
		</div>
		<div class=row>
			<label>
				<i class="icon trophy"></i>
				<span data-trans>The winner is</span>
			</label>
			<div class=btn-group>
				<button class="active btn-first-winner btn-winner" data-trans>First</button>
				<button class="btn-last-winner btn-winner" data-trans>Last</button>
				<input type=number id=in_winningRank value=1 min=1>
			</div>
		</div>
		<div class=row>
			<label>
				<i class="icon map"></i>
				<span data-trans>경기 정보</span>
			</label>
			<input id=in_gameInfo value placeholder="경기 일시와 구단명 등을 입력해주세요. 위쪽에 표시됩니다">
		</div>
		
	</div>
	<div class=left>
		<h3 data-trans>Enter names below</h3>
		<textarea id=in_names placeholder="Input names separated by commas or line feed here" data-trans=placeholder>홍길동*3, 아무개*2, 김철수</textarea>
		<div class=actions style=justify-content:space-between;align-items:center;display:flex>
			<div style=margin-right:20px>
				<button id=btnShare onclick=copyTest() style="cursor:pointer;color:#fefefe;background:#222;border:none;border-radius:5px;min-width:60px;height:35px;padding:5px 10px;position:relative;overflow:hidden">
					공유
				</button>
			</div>
			<div style=gap:8px;margin-left:auto;display:flex>
				<button id=btnPreStart style=display:none>
					<i class="icon preplay"></i>
					<span data-trans>선수 입장</span>
				</button>
				<button id=btnShuffle>
					<i class="icon shuffle"></i>
					<span data-trans>&nbsp;&nbsp;순서 섞기</span>
				</button>
				<button id=btnStart>
					<i class="icon play"></i>
					<span data-trans>&nbsp;&nbsp;추첨 시작</span>
				</button>
			</div>
		</div>
	</div>
</div>
<div id=precountdownOverlay></div>
<div id=playcountdownOverlay></div>

<div class=copyright></div> 원작자 : lazygyu
<div id=gameInfo style="color:#fff;text-align:center;z-index:9999;text-shadow:2px 2px 4px #000c;font-size:20px;font-weight:500;position:fixed;top:70px;left:50%;transform:translate(-50%)"></div>


